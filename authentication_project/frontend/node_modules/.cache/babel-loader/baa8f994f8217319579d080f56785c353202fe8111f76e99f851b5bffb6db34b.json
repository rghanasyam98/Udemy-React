{"ast":null,"code":"import { redirect } from \"react-router-dom\";\nfunction getTokenExpiry() {\n  const storedexpiration = localStorage.getItem('expiration');\n  const expirationDate = new Date(storedexpiration);\n  const now = new Date();\n  const duration = expirationDate.getTime() - now.getTime();\n  return duration;\n}\nconst getToken = () => {\n  const token = localStorage.getItem('token');\n  const tokenExpiry = getTokenExpiry();\n  if (tokenExpiry < 0) {\n    return \"EX\";\n  }\n  return token;\n};\nexport default getToken;\nexport function getTokenLoader() {\n  return getToken();\n}\n\n// if we try to access route that graphically not possible but when types on search bar\n// in that case if it need to be protected then check for token ,if no token then redirect\nexport function checkingForTokenLoader() {\n  const token = getToken();\n  if (!token) {\n    return redirect(\"/auth\");\n  }\n}","map":{"version":3,"names":["redirect","getTokenExpiry","storedexpiration","localStorage","getItem","expirationDate","Date","now","duration","getTime","getToken","token","tokenExpiry","getTokenLoader","checkingForTokenLoader"],"sources":["D:/Online course projects/udemy react/authentication_project/frontend/src/utils/authToken.js"],"sourcesContent":[" import { redirect } from \"react-router-dom\";\r\n \r\n  function getTokenExpiry(){\r\n     const storedexpiration=localStorage.getItem('expiration');\r\n     const expirationDate=new Date(storedexpiration);\r\n     const now=new Date();\r\n     const duration=expirationDate.getTime()-now.getTime();\r\n     return duration;\r\n }\r\n \r\n const getToken=()=>{\r\n    const token=localStorage.getItem('token');\r\n    const tokenExpiry=getTokenExpiry();\r\n    if(tokenExpiry<0){\r\n        return \"EX\"\r\n    }\r\n    return token;\r\n\r\n}\r\n\r\nexport default getToken;\r\n\r\nexport function getTokenLoader(){\r\n    return getToken();\r\n}\r\n\r\n// if we try to access route that graphically not possible but when types on search bar\r\n// in that case if it need to be protected then check for token ,if no token then redirect\r\nexport function checkingForTokenLoader(){\r\n    const token = getToken();\r\n    if(!token){\r\n        return redirect(\"/auth\");\r\n    }\r\n}"],"mappings":"AAAC,SAASA,QAAQ,QAAQ,kBAAkB;AAE1C,SAASC,cAAcA,CAAA,EAAE;EACtB,MAAMC,gBAAgB,GAACC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;EACzD,MAAMC,cAAc,GAAC,IAAIC,IAAI,CAACJ,gBAAgB,CAAC;EAC/C,MAAMK,GAAG,GAAC,IAAID,IAAI,CAAC,CAAC;EACpB,MAAME,QAAQ,GAACH,cAAc,CAACI,OAAO,CAAC,CAAC,GAACF,GAAG,CAACE,OAAO,CAAC,CAAC;EACrD,OAAOD,QAAQ;AACnB;AAEA,MAAME,QAAQ,GAACA,CAAA,KAAI;EAChB,MAAMC,KAAK,GAACR,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACzC,MAAMQ,WAAW,GAACX,cAAc,CAAC,CAAC;EAClC,IAAGW,WAAW,GAAC,CAAC,EAAC;IACb,OAAO,IAAI;EACf;EACA,OAAOD,KAAK;AAEhB,CAAC;AAED,eAAeD,QAAQ;AAEvB,OAAO,SAASG,cAAcA,CAAA,EAAE;EAC5B,OAAOH,QAAQ,CAAC,CAAC;AACrB;;AAEA;AACA;AACA,OAAO,SAASI,sBAAsBA,CAAA,EAAE;EACpC,MAAMH,KAAK,GAAGD,QAAQ,CAAC,CAAC;EACxB,IAAG,CAACC,KAAK,EAAC;IACN,OAAOX,QAAQ,CAAC,OAAO,CAAC;EAC5B;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}